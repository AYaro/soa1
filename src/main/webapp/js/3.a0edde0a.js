(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"713b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-layout",{attrs:{view:"lHh Lpr lFf"}},[a("q-header",{attrs:{elevated:""}},[a("q-toolbar",[a("q-toolbar-title",[e._v("\n        Flat service\n      ")]),a("div",[e._v("Ярошевич А. В. P3417 ЛР1")])],1)],1),a("q-page-container",[a("div",{attrs:{id:"q-app"}},[a("div",{staticClass:"q-pa-md"},[a("q-table",{attrs:{title:"Flats",selection:"single",selected:e.selected,data:e.data,columns:e.columns,"row-key":"id",pagination:e.pagination,loading:e.loading,filter:e.filter,"binary-state-sort":""},on:{"update:selected":function(t){e.selected=t},"update:pagination":function(t){e.pagination=t},request:e.onRequest},scopedSlots:e._u([{key:"top-right",fn:function(){return[e.$q.screen.gt.xs?a("div",{staticClass:"q-pa-md q-gutter-sm"},[a("q-btn",{attrs:{color:"dark",label:"Create"},on:{click:function(t){e.create=!0}}}),a("q-btn",{attrs:{color:"secondary",label:"Edit",disabled:0==e.selected.length},on:{click:function(t){e.edited=e.selected[0],e.edit=!0}}}),a("q-btn",{attrs:{color:"secondary",label:"Delete",disabled:0==e.selected.length},on:{click:function(t){return e.deleteReq(e.selected[0].id)}}})],1):e._e(),a("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0}])})],1)]),a("q-dialog",{attrs:{persistent:""},model:{value:e.edit,callback:function(t){e.edit=t},expression:"edit"}},[a("q-card",{staticStyle:{"min-width":"500px"}},[a("q-card-section",[a("q-input",{attrs:{filled:"",label:"name","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please type something"}]},model:{value:e.edited.name,callback:function(t){e.$set(e.edited,"name",t)},expression:"edited.name"}}),a("q-input",{attrs:{filled:"",label:"coordinate X","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please type something"}]},model:{value:e.edited.coordinates.x,callback:function(t){e.$set(e.edited.coordinates,"x",t)},expression:"edited.coordinates.x"}}),a("q-input",{attrs:{filled:"",label:"coordinate Y","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please type something"}]},model:{value:e.edited.coordinates.y,callback:function(t){e.$set(e.edited.coordinates,"y",t)},expression:"edited.coordinates.y"}}),a("q-input",{attrs:{filled:"",label:"Area","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please type something"}]},model:{value:e.edited.area,callback:function(t){e.$set(e.edited,"area",t)},expression:"edited.area"}}),a("q-input",{attrs:{filled:"",label:"Rooms","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please type something"}]},model:{value:e.edited.numberOfRooms,callback:function(t){e.$set(e.edited,"numberOfRooms",t)},expression:"edited.numberOfRooms"}}),a("q-input",{attrs:{filled:"",label:"Height","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please type something"}]},model:{value:e.edited.height,callback:function(t){e.$set(e.edited,"height",t)},expression:"edited.height"}}),a("q-input",{attrs:{filled:"",label:"House name","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please type something"}]},model:{value:e.edited.house.name,callback:function(t){e.$set(e.edited.house,"name",t)},expression:"edited.house.name"}}),a("q-input",{attrs:{filled:"",label:"House lifts","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please type something"}]},model:{value:e.edited.house.numberOfLifts,callback:function(t){e.$set(e.edited.house,"numberOfLifts",t)},expression:"edited.house.numberOfLifts"}}),a("q-input",{attrs:{filled:"",label:"House year","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please type something"}]},model:{value:e.edited.house.year,callback:function(t){e.$set(e.edited.house,"year",t)},expression:"edited.house.year"}})],1),a("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Save"},on:{click:function(t){return e.updateReq(e.edited)}}})],1)],1)],1),a("q-dialog",{attrs:{persistent:""},model:{value:e.create,callback:function(t){e.create=t},expression:"create"}},[a("q-card",{staticStyle:{"min-width":"500px"}},[a("q-card-section",[a("q-input",{attrs:{filled:"",label:"name","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please type something"}]},model:{value:e.created.name,callback:function(t){e.$set(e.created,"name",t)},expression:"created.name"}}),a("q-input",{attrs:{filled:"",label:"coordinate X","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please type something"}]},model:{value:e.created.coordinateX,callback:function(t){e.$set(e.created,"coordinateX",t)},expression:"created.coordinateX"}}),a("q-input",{attrs:{filled:"",label:"coordinate Y","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please type something"}]},model:{value:e.created.coordinateY,callback:function(t){e.$set(e.created,"coordinateY",t)},expression:"created.coordinateY"}}),a("q-input",{attrs:{filled:"",label:"Area","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please type something"}]},model:{value:e.created.area,callback:function(t){e.$set(e.created,"area",t)},expression:"created.area"}}),a("q-input",{attrs:{filled:"",label:"Rooms","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please type something"}]},model:{value:e.created.numberOfRooms,callback:function(t){e.$set(e.created,"numberOfRooms",t)},expression:"created.numberOfRooms"}}),a("q-input",{attrs:{filled:"",label:"Height","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please type something"}]},model:{value:e.created.height,callback:function(t){e.$set(e.created,"height",t)},expression:"created.height"}}),a("q-input",{attrs:{filled:"",label:"House name","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please type something"}]},model:{value:e.created.houseName,callback:function(t){e.$set(e.created,"houseName",t)},expression:"created.houseName"}}),a("q-input",{attrs:{filled:"",label:"House lifts","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please type something"}]},model:{value:e.created.numberOfLifts,callback:function(t){e.$set(e.created,"numberOfLifts",t)},expression:"created.numberOfLifts"}}),a("q-input",{attrs:{filled:"",label:"House year","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please type something"}]},model:{value:e.created.year,callback:function(t){e.$set(e.created,"year",t)},expression:"created.year"}}),a("q-input",{attrs:{filled:"",label:"Transport","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please type something"}]},model:{value:e.created.transport,callback:function(t){e.$set(e.created,"transport",t)},expression:"created.transport"}}),a("q-input",{attrs:{filled:"",label:"Furnish","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please type something"}]},model:{value:e.created.furnish,callback:function(t){e.$set(e.created,"furnish",t)},expression:"created.furnish"}})],1),a("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Create"},on:{click:function(t){return e.createReq(e.created)}}})],1)],1)],1)],1)],1)},o=[],r=(a("ddb0"),a("bc3a")),s=a.n(r),i=a("2a19");const l=s.a.create({baseURL:"/"});var d={name:"MainLayout",data(){return{edit:!1,edited:{id:1,name:"test name",coordinates:{x:1,y:2},creationDate:{date:{year:2021,month:2,day:21},time:{hour:0,minute:0,second:0,nano:0}},area:89,numberOfRooms:3,height:310,house:{name:"a",year:1891,numberOfLifts:2}},create:!1,created:{name:"new",coordinateX:0,coordinateY:0,area:0,numberOfRooms:0,height:0,houseName:"new",year:2020,numberOfLifts:0,transport:"enough",furnish:"designer"},selected:[],filter:"",loading:!1,pagination:{sortBy:"desc",descending:!1,page:1,rowsPerPage:5,rowsNumber:10},columns:[{name:"id",align:"center",label:"ID",field:"id",sortable:!0},{name:"name",label:"Name",field:"name",sortable:!0},{name:"coordinateX",label:"Coordinate X",field:e=>e.coordinates.x,sortable:!0},{name:"coordinateY",label:"Coordinate Y",field:e=>e.coordinates.y,sortable:!0},{name:"creationDate",label:"CreationDate",field:e=>e.creationDate,sortable:!0},{name:"area",label:"Area (m^2)",field:"area",sortable:!0},{name:"numberOfRooms",label:"Rooms",field:"numberOfRooms",sortable:!0},{name:"height",label:"Height (cm)",field:"height",sortable:!0},{name:"houseName",label:"House name",field:e=>e.house.name,sortable:!0},{name:"houseYear",label:"House year",field:e=>e.house.year,sortable:!0},{name:"houseLifts",label:"House lifts",field:e=>e.house.numberOfLifts,sortable:!0},{name:"transport",label:"Transport",field:e=>e.transport,sortable:!0},{name:"furnish",label:"Furnish",field:e=>e.furnish,sortable:!0}],data:[],original:[{id:1,name:"test name",coordinates:{x:1,y:2},creationDate:{date:{year:2021,month:2,day:21},time:{hour:0,minute:0,second:0,nano:0}},area:89,numberOfRooms:3,height:310,house:{name:"a",year:1891,numberOfLifts:2}},{id:2,name:"test name",coordinates:{x:1,y:2},creationDate:{date:{year:2021,month:2,day:21},time:{hour:0,minute:0,second:0,nano:0}},area:89,numberOfRooms:3,height:310,house:{name:"a",year:1891,numberOfLifts:2}},{id:3,name:"test name",coordinates:{x:1,y:2},creationDate:{date:{year:2021,month:2,day:21},time:{hour:0,minute:0,second:0,nano:0}},area:89,numberOfRooms:3,height:310,house:{name:"a",year:1891,numberOfLifts:2}},{id:4,name:"test name",coordinates:{x:1,y:2},creationDate:{date:{year:2021,month:2,day:21},time:{hour:0,minute:0,second:0,nano:0}},area:89,numberOfRooms:3,height:310,house:{name:"a",year:1891,numberOfLifts:2}},{id:5,name:"test name",coordinates:{x:1,y:2},creationDate:{date:{year:2021,month:2,day:21},time:{hour:0,minute:0,second:0,nano:0}},area:89,numberOfRooms:3,height:310,house:{name:"a",year:1891,numberOfLifts:2}},{id:6,name:"test name",coordinates:{x:1,y:2},creationDate:{date:{year:2021,month:2,day:21},time:{hour:0,minute:0,second:0,nano:0}},area:89,numberOfRooms:3,height:310,house:{name:"a",year:1891,numberOfLifts:2}},{id:7,name:"test name",coordinates:{x:1,y:2},creationDate:{date:{year:2021,month:2,day:21},time:{hour:0,minute:0,second:0,nano:0}},area:89,numberOfRooms:3,height:310,house:{name:"a",year:1891,numberOfLifts:2}},{id:8,name:"test name",coordinates:{x:1,y:2},creationDate:{date:{year:2021,month:2,day:21},time:{hour:19,minute:8,second:49,nano:34e7}},area:89,numberOfRooms:3,height:310,house:{name:"a",year:1891,numberOfLifts:2}},{id:9,name:"test name",coordinates:{x:1,y:2},creationDate:{date:{year:2021,month:2,day:21},time:{hour:19,minute:8,second:52,nano:74e6}},area:89,numberOfRooms:3,height:310,house:{name:"a",year:1891,numberOfLifts:2}}]}},mounted(){this.onRequest({pagination:this.pagination,filter:void 0})},methods:{deleteReq(e){l.delete("flats/"+e).catch((e=>{i["a"].create(e),console.log(e)}))},createReq(e){l.post("flats?name="+encodeURI(e.name)+"&coordinateY="+encodeURI(e.coordinateX)+"&coordinateX="+encodeURI(e.coordinateY)+"&numberOfRooms="+encodeURI(e.numberOfRooms)+"&area="+encodeURI(e.area)+"&height="+encodeURI(e.height)+"&transport="+encodeURI(e.transport.toLowerCase())+"&furnish="+encodeURI(e.furnish.toLowerCase())+"&houseName="+encodeURI(e.houseName)+"&year="+encodeURI(e.year)+"&numberOfLifts="+encodeURI(e.numberOfLifts)).catch((e=>{alert(e),i["a"].create(e),console.log(e)}))},updateReq(e){l.put("flats/"+e.id+"?name="+encodeURI(e.name)+"&coordinateY="+encodeURI(e.coordinates.x)+"&coordinateX="+encodeURI(e.coordinates.y)+"&numberOfRooms="+encodeURI(e.numberOfRooms)+"&area="+encodeURI(e.area)+"&height="+encodeURI(e.height)+"&transport="+encodeURI(e.transport.toLowerCase())+"&furnish="+encodeURI(e.furnish.toLowerCase())+"&houseName="+encodeURI(e.house.name)+"&year="+encodeURI(e.house.year)+"&numberOfLifts="+encodeURI(e.house.numberOfLifts)).catch((e=>{alert(e),i["a"].create(e),console.log(e)}))},onRequest(e){const{page:t,rowsPerPage:a,sortBy:n,descending:o}=e.pagination,r=e.filter;this.loading=!0,setTimeout((()=>{this.pagination.rowsNumber=this.getRowsNumberCount(r);const e=0===a?this.pagination.rowsNumber:a,s=(t-1)*a;var i=this.data;this.fetchFromServer(s,e,r,n,o).then((function(e){i.splice(0,i.length,...e)})),this.pagination.page=t,this.pagination.rowsPerPage=a,this.pagination.sortBy=n,this.pagination.descending=o,this.loading=!1}),1500)},fetchFromServer(e,t,a,n,o){var r="flats?offset="+e+"&limit="+t;return a&&(r=r+"&"+a),l.get(r).catch((e=>{i["a"].create(e),console.log(e)})).then((function(e){return console.log(e.data),e.data}))},getRowsNumberCount(e){if(!e)return this.original.length;let t=0;return this.original.forEach((a=>{a.name.includes(e)&&++t})),t}}},c=d,u=a("2877"),m=a("4d5a"),f=a("e359"),h=a("65c6"),p=a("6ac5"),b=a("09e3"),g=a("eaac"),y=a("9c40"),R=a("27f9"),q=a("0016"),v=a("24e8"),x=a("f09f"),O=a("a370"),k=a("4b7e"),L=a("7f67"),P=a("eebe"),w=a.n(P),I=Object(u["a"])(c,n,o,!1,null,null,null);t["default"]=I.exports;w()(I,"components",{QLayout:m["a"],QHeader:f["a"],QToolbar:h["a"],QToolbarTitle:p["a"],QPageContainer:b["a"],QTable:g["a"],QBtn:y["a"],QInput:R["a"],QIcon:q["a"],QDialog:v["a"],QCard:x["a"],QCardSection:O["a"],QCardActions:k["a"]}),w()(I,"directives",{ClosePopup:L["a"]})}}]);